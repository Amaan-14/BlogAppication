@model BlogApplication.Models.Blog
@{
    ViewBag.Title = "ChangePhoto";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="custom-border-bottom py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mb-0"><a href="/Products/Index">Admin</a> <span class="mx-2 mb-0">/</span> <strong class="text-black">Change Product photo</strong></div>
        </div>
    </div>
</div>

<div class="site-section mb-5" style="margin-top:30px">
    <div class="container">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <div class="p-3 p-lg-5 border">
                    @using (Html.BeginForm("ChangePhoto", "Blogs", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {

                        <div class="form-horizontal">
                            <h4 class="text-black">Product Images</h4>
                            <hr />
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="form-group">

                                <div class="col-md-12">
                                    <input type="file" name="Photo" id="Photo" onchange="previewFile1();">
                                    <br />
                                    <br />
                                    <center>
                                        <img id="PhotoPreviewPhoto" alt="Preview" src="~/images/uploadphoto.jpg" name="PhotoPreviewPhoto" style="width:70%;max-width:70%" />
                                    </center>
                                </div>
                            </div>
                            <div class="form-group" style="display:none">
                                <input id="prodid" name="prodid" type="hidden" value="@Model.Id" />
                            </div>

                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <input type="submit" value="Upload" class="btn btn-black" style="padding-top:10px" />
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
</div>
<script defer>
    function preview(id, imgid) {
        let inputid = document.querySelector(`#${id}`).addEventListener("change", function (e) {
            let file = e.target.files[0];
            let imageURL = URL.createObjectURL(file)
            let targetImage = document.getElementById(`${imgid}`)
            targetImage.src = imageURL
        })
    }

    preview("Photo", "PhotoPreviewPhoto")
</script>

